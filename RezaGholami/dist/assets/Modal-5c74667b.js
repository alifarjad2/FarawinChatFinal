import{j as e,b as I,c as F,r as d,d as k,a as S,s as U,B as f,e as u}from"./index-6c18d655.js";const N=({label:s,htmlFor:n,type:x,placeholder:l,children:c,onInput:m,value:o})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:n,className:"text-xs text-white pr-2 mb-2",children:s}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute top-2 text-[#adadad] pr-2",children:c}),e.jsx("input",{type:x,id:n,value:o,onInput:m,placeholder:l,className:"text-[#2E333D] transition rounded-lg text-sm pr-8 border-b-2 outline-none h-8 w-full placeholder:text-sm"})]})]}),A=()=>{const s=I().pathname,n=F(),[x,l]=d.useState(null),[c,m]=d.useState(""),[o,g]=d.useState(""),[r,b]=d.useState(null),[i,j]=d.useState(null),h="bg-gray-500 rounded-lg h-8 text-sm",C=a=>{m(a.target.value),u.mobileRegex.test(a.target.value)?b(!0):b(!1)},v=a=>{g(a.target.value),a.target.value.length>=3?j(!0):j(!1)},w=async a=>{a.preventDefault(),l(!0),await u.testAddContact(c,o,t=>{t.code=="200"?(console.log("result from api -> ",t),n("/chat")):console.error("error from api -> ",t),alert(t.message),l(!1)})},y=async a=>{a.preventDefault(),l(!0),await u.testEditContact(c,o,t=>{t.code=="200"?(console.log("result from api -> ",t),n("/chat")):console.error("error from api -> ",t),alert(t.message),l(!1)})},D=async a=>{a.preventDefault(),l(!0),await u.testDeleteContact(c,t=>{t.code=="200"?(console.log("result from api -> ",t),n("/chat")):console.error("error from api -> ",t),alert(t.message),l(!1)})},E=a=>{a.target.id==="outsideForm"&&n("/chat")};return e.jsx("div",{id:"outsideForm",className:"w-full h-full flex items-center justify-center fixed z-10  backdrop-blur-md",onClick:E,children:e.jsxs("form",{className:"fixed flex flex-col bg-[#2E333D] text-white p-4 rounded-2xl border-[#d3d4d6] border-x-8",children:[e.jsx("h4",{className:"text-sm text-center mb-5",children:s==="/chat/addContact"?"فرم افزودن مخاطب":s==="/chat/editContact"?"فرم ویرایش مخاطب":s==="/chat/deleteContact"?"فرم حذف مخاطب":""}),e.jsx(N,{label:"نام کاربری",type:"tel",value:c,htmlFor:"InputUserName",placeholder:"0912345678",onInput:C,children:e.jsx(k,{})}),e.jsx("div",{className:"flex items-center justify-center h-4 py-3 text-xs mb-2",children:r===null?null:r?e.jsx("span",{className:"font-bold text-green-700",children:"فرمت شماره موبایل صحیح است !"}):e.jsx("span",{className:"font-bold text-red-700",children:"شماره با 09 شروع و 11 رقم میباشد !"})}),s==="/chat/addContact"||s==="/chat/editContact"?e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"نام",type:"tel",value:o,htmlFor:"InputName",onInput:v,children:e.jsx(S,{})}),e.jsx("div",{className:"flex items-center justify-center h-2 py-3 text-xs mb-4",children:i===null?null:i?e.jsx("span",{className:"font-bold text-green-700",children:"تعداد کاراکتر صحیح میباشد !"}):e.jsx("span",{className:"font-bold text-red-700",children:"تعداد حروف باید بیشتر از 3 باشد !"})})]}):null,x?e.jsx("div",{className:"h-10 w-full",children:e.jsx("img",{src:U,className:"w-14 h-10 mx-auto "})}):null,s==="/chat/addContact"?e.jsx(f,{text:"افزودن",classButton:h,onClick:w,isEnabled:i&&r}):s==="/chat/editContact"?e.jsx(f,{text:"ویرایش",classButton:h,onClick:y,isEnabled:i&&r}):s==="/chat/deleteContact"?e.jsx(f,{text:"حذف",classButton:h,onClick:D,isEnabled:r}):""]})})};export{A as default};
